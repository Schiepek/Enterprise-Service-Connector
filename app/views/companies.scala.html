@(companies: List[String], lastImport: Date)

@import helper._

@main("Users") {

    Last import:
    @if(lastImport != null) {
        @lastImport.format("dd.M.yyyy HH:mm:ss")<br />
    } else {
        no import executed yet.<br />
    }

    @for(company <- companies){
        @if(company) {
            <h2>@company</h2>
        } else {
            <h2>Company unknown</h2>
        }

        <table class="aui content-report-table-macro tablesorter">
            <thead>
                <tr class="tablesorter-headerRow">
                    <th>Name</th>
                    <th>Usergroups</th>
                    <th>Access</th>
                    <th>Function</th>
                    <th>Company</th>
                    <th>Contact Data</th>
                </tr>
            </thead>
            <tbody>
            @for(user <- ServiceUser.companyUsers(company)){
                <tr>
                    <td>@user.getFullName</td>
                    <td>
                    @for(group <- user.getGroups) {
                        @group.getName (@group.getProvider.toString.toLowerCase())<br />
                    }
                    </td>
                    <td>
                        @if(user.getUsernameGoogle) {
                            Google: @user.getUsernameGoogle<br />
                        }
                        @if(user.getUsernameJira) {
                            Jira: @user.getUsernameJira<br />
                        }
                        @if(user.getUsernameConfluence) {
                            Confluence: @user.getUsernameConfluence<br />
                        }
                    </td>
                    <td>@user.getFunction</td>
                    <td>@user.getCompany</td>
                    <td>
                        @if(user.getMail) {
                            E-Mail: <a href="mailto:@user.getMail">@user.getMail</a><br />
                        }
                        @if(user.getPhoneWork) {
                            Phone: @user.getPhoneWork<br />
                        }
                        @if(user.getPhoneMobile) {
                            Mobile: @user.getPhoneMobile<br />
                        }
                        @if(user.getPhoneCompany) {
                            Company Phone: @user.getPhoneCompany<br />
                        }
                        @if(user.getSalesforceId) {
                            <a target="_blank" href="@user.getSalesforceId">Salesforce Contact</a>
                        }
                    </td>
                </tr>
            }
            </tbody>
        </table>
    }


}